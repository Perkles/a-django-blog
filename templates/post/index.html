{% extends "base.html" %}

{% block title %}Blog{% endblock %}

{% block content %}
    <p><h1>{{author.username}}'s posts</h1></p> <a href="{% url 'post-new' author.username %}">new</a>
    {% for post in posts %}
        {% if post.posted == True %}
            <div class="public">
        {% else %}
            <div class="private">
        {% endif %}
            <h1><a href="{{post.get_absolute_url}}">{{post.title}}</a></h1>

            {% if post.author.username == user_logged %}
                <a href="{{post.get_absolute_url_delete}}">Delete</a>
            {% endif %}

            {% if post.author.username == user_logged %}
                <a href="{{post.get_absolute_url_publish}}">Publish</a>
            {% endif %}

            <p>
                {{post.content|slice:":400" }}...
                <small>
                    {% if post.content|length >= 400 %}
                        <a href="{{post.get_absolute_url}}">
                            Keep reading
                        </a>
                    {% endif %}
                </small>
            </p>
            
            {% for tag in post.tags.all %}
               <p>{{tag.tag_name}}</p>
            {% endfor %}

            <small>{{post.author.email}}</small>
            <small>{{post.posting_date}}</small>
        </div>
    {% endfor %}
{% endblock %}